<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <script>
        function validateForm() {
            const form = document.forms["registrationForm"];
            const id = form["id"].value;
            const password = form["password"].value;
            const passwordConfirm = form["passwordConfirm"].value;
            const gender = form["gender"].value;
            const birthDate = form["birthDate"].value;

            if (id === "" || password === "" || passwordConfirm === "" || gender === "" || birthDate === "") {
                alert("모든 입력사항은 필수입니다.");
                return false;
            }

            if (id.length < 6) {
                alert("아이디는 최소 6자 이상이어야 합니다.");
                return false;
            }

            if (password !== passwordConfirm) {
                alert("암호와 암호확인이 동일해야 합니다.");
                return false;
            }

            if (gender !== "male" && gender !== "female") {
                alert("성별을 체크해주세요.");
                return false;
            }

            if (birthDate.length !== 8 || isNaN(birthDate)) {
                alert("생년월일은 8자리여야 합니다.");
                return false;
            }

            const birthYear = parseInt(birthDate.substring(0, 4));
            const birthMonth = parseInt(birthDate.substring(4, 6)) - 1; // 월은 0부터 시작
            const birthDay = parseInt(birthDate.substring(6, 8));
            const birthDateObj = new Date(birthYear, birthMonth, birthDay);
            const age = calculateAge(birthDateObj);

            alert(`나이는 ${age}살입니다.`);
            return true;
        }

        function calculateAge(birthDate) {
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDifference = today.getMonth() - birthDate.getMonth();
            if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            return age;
        }
    </script>
</head>
<body>
    <h2>Registration Form</h2>
    <form name="registrationForm" action="my_reg_action.html" onsubmit="return validateForm()">
        <label for="id">아이디:</label>
        <input type="text" id="id" name="id" minlength="6" required><br><br>

        <label for="password">암호:</label>
        <input type="password" id="password" name="password" required><br><br>

        <label for="passwordConfirm">암호확인:</label>
        <input type="password" id="passwordConfirm" name="passwordConfirm" required><br><br>

        <label>성별:</label>
        <input type="radio" id="male" name="gender" value="male" required>
        <label for="male">남자</label>
        <input type="radio" id="female" name="gender" value="female" required>
        <label for="female">여자</label><br><br>

        <label for="birthDate">생년월일 (yyyyMMdd):</label>
        <input type="text" id="birthDate" name="birthDate" pattern="\d{8}" required><br><br>

        <input type="submit" value="전송">
    </form>
</body>
</html>